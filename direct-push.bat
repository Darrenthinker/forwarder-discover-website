@echo off
chcp 65001 >nul 2>&1

echo.
echo ================================================
echo             è‡ªåŠ¨GitæŽ¨é€ç³»ç»Ÿ
echo ================================================
echo ðŸš€ AIåŠ©æ‰‹æ­£åœ¨ä¸ºæ‚¨æŽ¨é€ä»£ç åˆ°Git...
echo.

echo [1/4] ðŸ“ æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº...
git add -A
if %errorlevel% equ 0 (
    echo âœ… æ–‡ä»¶æ·»åŠ æˆåŠŸ
) else (
    echo âŒ æ–‡ä»¶æ·»åŠ å¤±è´¥
    goto error
)

echo.
echo [2/4] ðŸ’¾ æäº¤æ›´æ”¹åˆ°æœ¬åœ°ä»“åº“...
git commit -m "AIåŠ©æ‰‹è‡ªåŠ¨æŽ¨é€ - %date% %time%"
if %errorlevel% equ 0 (
    echo âœ… æäº¤æˆåŠŸ
) else (
    echo â„¹ï¸ æ²¡æœ‰æ–°æ›´æ”¹éœ€è¦æäº¤
)

echo.
echo [3/4] ðŸš€ æŽ¨é€åˆ°è¿œç¨‹ä»“åº“...
git push origin main
if %errorlevel% equ 0 (
    echo âœ… æŽ¨é€æˆåŠŸï¼
    goto success
) else (
    echo âŒ æŽ¨é€å¤±è´¥ï¼Œå°è¯•ä¿®å¤...
    echo [4/4] ðŸ”„ æ‹‰å–è¿œç¨‹æ›´æ”¹å¹¶é‡æ–°æŽ¨é€...
    git pull origin main
    if %errorlevel% equ 0 (
        git push origin main
        if %errorlevel% equ 0 (
            echo âœ… ä¿®å¤åŽæŽ¨é€æˆåŠŸï¼
            goto success
        ) else (
            echo âŒ é‡æ–°æŽ¨é€å¤±è´¥
            goto error
        )
    ) else (
        echo âŒ æ‹‰å–å¤±è´¥
        goto error
    )
)

:success
echo.
echo ================================================
echo            ðŸŽ‰ æŽ¨é€å®Œæˆï¼
echo ================================================
echo    âœ… æ‚¨çš„ä»£ç å·²æˆåŠŸæŽ¨é€åˆ°Gitä»“åº“
echo    ðŸ“… æŽ¨é€æ—¶é—´: %date% %time%
echo    ðŸ¤– ç”±AIåŠ©æ‰‹è‡ªåŠ¨æ‰§è¡Œ
echo ================================================
echo.
echo çª—å£å°†åœ¨3ç§’åŽè‡ªåŠ¨å…³é—­...
timeout /t 3 >nul
exit /b 0

:error
echo.
echo ================================================
echo            âŒ æŽ¨é€å¤±è´¥ï¼
echo ================================================
echo    è¯·æ£€æŸ¥:
echo    - ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸
echo    - Gité…ç½®æ˜¯å¦æ­£ç¡®
echo    - æ˜¯å¦æœ‰æƒé™æŽ¨é€åˆ°è¿œç¨‹ä»“åº“
echo ================================================
echo.
echo æŒ‰ä»»æ„é”®å…³é—­...
pause >nul
exit /b 1 